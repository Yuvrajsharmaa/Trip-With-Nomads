<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking Flow Prototype - Trip With Nomads</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,400;500;700&family=Manrope:wght@400;500;700;800&display=swap"
        rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            blue: "#1B91C9",
                            DEFAULT: "#1B91C9",
                        }
                    },
                    fontFamily: {
                        sans: ['DM Sans', 'sans-serif'],
                        heading: ['Manrope', 'sans-serif'],
                    }
                }
            }
        }
    </script>
</head>

<body class="bg-gray-50 text-gray-900 font-sans min-h-screen">

    <!-- Navbar -->
    <nav class="bg-white border-b border-gray-100 py-4 px-6 fixed w-full top-0 z-50 shadow-sm">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <a href="#" class="font-heading font-bold text-2xl text-[#1B91C9] tracking-tight">TWN</a>
            <div class="flex items-center gap-2 text-sm text-gray-500 font-medium">
                <i class="fa-solid fa-lock text-[#1B91C9]"></i> Secure Booking
            </div>
        </div>
    </nav>

    <div class="max-w-6xl mx-auto px-6 pt-28 pb-12 grid grid-cols-1 lg:grid-cols-3 gap-12">

        <!-- Left Column: Booking Form -->
        <div class="lg:col-span-2">
            <div class="mb-8">
                <h1 class="text-3xl font-heading font-bold mb-2">Book Your Trip</h1>
                <p class="text-gray-600">Complete your details to secure your spot for <span
                        class="font-bold text-[#1B91C9]">Kashmir: Heaven on Earth</span>.</p>
            </div>

            <!-- Travellers Container -->
            <div id="travellers-container" class="space-y-6">
                <!-- Forms inserted by JS -->
            </div>

            <!-- Add Traveller Button -->
            <button onclick="addTraveller()"
                class="mt-6 w-full py-4 border-2 border-dashed border-gray-300 rounded-xl text-gray-500 font-medium hover:border-[#1B91C9] hover:text-[#1B91C9] hover:bg-white transition-all flex items-center justify-center gap-2 group">
                <span
                    class="bg-gray-200 group-hover:bg-[#1B91C9] group-hover:text-white rounded-full w-6 h-6 flex items-center justify-center text-gray-600 transition-colors">+</span>
                Add Another Traveller (Friend/Family)
            </button>
        </div>

        <!-- Right Column: Pricing Summary -->
        <div class="lg:col-span-1">
            <div class="bg-white border border-gray-100 rounded-xl p-6 shadow-sm sticky top-24">
                <h3 class="text-xl font-heading font-bold text-gray-900 mb-4 pb-2 border-b border-gray-100">Booking
                    Summary</h3>

                <div class="mb-6 flex gap-4">
                    <img src="https://images.unsplash.com/photo-1566837945700-30057527ade0?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&q=80"
                        class="w-20 h-20 rounded-lg object-cover" alt="Trip">
                    <div>
                        <h4 class="font-bold text-gray-900 leading-tight">Kashmir: Heaven on Earth</h4>
                        <p className="text-sm text-gray-500 mt-1"><i class="fa-regular fa-calendar"></i> Dec 15 - Dec 22
                        </p>
                    </div>
                </div>

                <div class="space-y-3 text-sm">
                    <div class="flex justify-between items-center text-gray-600">
                        <span id="quantity-display">1 Traveller x $499</span>
                        <span id="subtotal-display">$499.00</span>
                    </div>

                    <div class="flex justify-between items-center text-gray-600">
                        <span class="flex items-center gap-1 cursor-help group relative">
                            Service Tax (2%) <i class="fa-solid fa-circle-info text-gray-300"></i>
                            <div
                                class="absolute left-0 bottom-full mb-2 hidden group-hover:block w-48 bg-gray-800 text-white text-xs rounded p-2 z-50 shadow-lg">
                                Mandatory government service tax (2%) applicable on all travel bookings.
                            </div>
                        </span>
                        <span id="tax-display">$9.98</span>
                    </div>

                    <div class="border-t border-gray-200 mt-4 pt-4 flex justify-between items-center">
                        <span class="font-bold text-lg text-gray-900">Total Payable</span>
                        <span id="total-display" class="font-heading font-bold text-2xl text-[#1B91C9]">$508.98</span>
                    </div>
                </div>

                <button onclick="alert('Proceeding to Razorpay...')"
                    class="w-full mt-6 bg-[#1B91C9] hover:bg-[#157da3] text-white font-bold py-4 px-6 rounded-xl transition-all shadow-lg shadow-blue-500/30 transform hover:-translate-y-0.5 active:translate-y-0 text-lg flex justify-between items-center">
                    <span>Secure Checkout</span>
                    <i class="fa-solid fa-arrow-right"></i>
                </button>

                <div class="mt-4 flex justify-center items-center gap-2 text-xs text-gray-400">
                    <span><i class="fa-solid fa-lock"></i> SSL Encrypted</span>
                    <span>â€¢</span>
                    <span><i class="fa-brands fa-cc-visa"></i> <i class="fa-brands fa-cc-mastercard"></i> Cards
                        Accepted</span>
                </div>
            </div>

            <div class="mt-6 bg-blue-50 border border-blue-100 rounded-xl p-4 text-sm text-blue-800">
                <p class="font-bold mb-1"><i class="fa-regular fa-lightbulb"></i> Good to know</p>
                <ul class="list-disc pl-4 space-y-1 text-blue-700/80">
                    <li>Free cancellation up to 7 days before.</li>
                    <li>Instant confirmation voucher via email.</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Template for Traveller Form -->
    <template id="traveller-template">
        <div
            class="traveller-card bg-white border border-gray-100 rounded-xl p-6 shadow-sm animate-fade-in relative transition-all hover:shadow-md">
            <div class="flex justify-between items-center mb-4 pb-2 border-b border-gray-50">
                <h3 class="font-heading font-bold text-lg text-gray-800 traveller-title">Traveller 1</h3>
                <button class="remove-btn text-red-400 hover:text-red-600 text-sm font-medium hidden">
                    <i class="fa-solid fa-trash"></i> Remove
                </button>
            </div>

            <div
                class="self-checkbox-container mb-5 flex items-center p-3 bg-blue-50/50 rounded-lg border border-blue-100 hidden">
                <input type="checkbox" id=""
                    class="self-checkbox w-5 h-5 text-[#1B91C9] rounded border-gray-300 focus:ring-[#1B91C9]">
                <label for="" class="ml-3 text-sm font-medium text-gray-700 cursor-pointer">
                    I am this traveller (Auto-fill my details)
                </label>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                <div class="space-y-1">
                    <label class="text-sm font-bold text-gray-700">Full Name</label>
                    <div class="relative">
                        <i class="fa-regular fa-user absolute left-3 top-3.5 text-gray-400"></i>
                        <input type="text"
                            class="name-input w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-100 focus:border-[#1B91C9] outline-none transition-all placeholder-gray-400"
                            placeholder="e.g. John Doe">
                    </div>
                </div>
                <div class="space-y-1">
                    <label class="text-sm font-bold text-gray-700">Age</label>
                    <div class="relative">
                        <input type="number"
                            class="age-input w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-100 focus:border-[#1B91C9] outline-none transition-all placeholder-gray-400"
                            placeholder="e.g. 25" min="18">
                        <div
                            class="absolute right-3 top-3.5 text-gray-400 text-xs font-medium bg-gray-100 px-2 py-0.5 rounded">
                            Years</div>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <script>
        const TRIP_PRICE = 499;
        const TAX_RATE = 0.02;

        let travellers = [
            { id: 1, isSelf: false, name: '', age: '' }
        ];

        // Mock Auth User
        const CURRENT_USER = { name: "Yuvraj Sharma", age: 26 };

        function renderTravellers() {
            const container = document.getElementById('travellers-container');
            container.innerHTML = '';

            const template = document.getElementById('traveller-template');

            travellers.forEach((t, index) => {
                const clone = template.content.cloneNode(true);
                const card = clone.querySelector('.traveller-card');

                // Set Title
                clone.querySelector('.traveller-title').textContent = `Traveller ${index + 1}`;

                // Setup Remove Button
                const removeBtn = clone.querySelector('.remove-btn');
                if (index > 0) {
                    removeBtn.classList.remove('hidden');
                    removeBtn.onclick = () => removeTraveller(t.id);
                }

                // Setup Self Checkbox (Only for first traveller usually, or any)
                const checkboxContainer = clone.querySelector('.self-checkbox-container');
                const checkbox = clone.querySelector('.self-checkbox');
                const label = clone.querySelector('label');

                checkbox.id = `self-${t.id}`;
                label.setAttribute('for', `self-${t.id}`);

                // Show checkbox only for Traveller 1 in this demo logic
                if (index === 0) {
                    checkboxContainer.classList.remove('hidden');
                    checkbox.checked = t.isSelf;
                    checkbox.onchange = (e) => toggleSelf(t.id, e.target.checked);
                }

                // Inputs
                const nameInput = clone.querySelector('.name-input');
                const ageInput = clone.querySelector('.age-input');

                nameInput.value = t.name;
                ageInput.value = t.age;

                // Sync inputs back to state
                nameInput.oninput = (e) => updateTraveller(t.id, 'name', e.target.value);
                ageInput.oninput = (e) => updateTraveller(t.id, 'age', e.target.value);

                container.appendChild(clone);
            });

            updatePricing();
        }

        function addTraveller() {
            const newId = travellers.length > 0 ? Math.max(...travellers.map(t => t.id)) + 1 : 1;
            travellers.push({ id: newId, isSelf: false, name: '', age: '' });
            renderTravellers();
        }

        function removeTraveller(id) {
            if (travellers.length <= 1) return;
            travellers = travellers.filter(t => t.id !== id);
            renderTravellers();
        }

        function updateTraveller(id, field, value) {
            const t = travellers.find(t => t.id === id);
            if (t) t[field] = value;
        }

        function toggleSelf(id, isChecked) {
            const t = travellers.find(t => t.id === id);
            if (t) {
                t.isSelf = isChecked;
                if (isChecked) {
                    t.name = CURRENT_USER.name;
                    t.age = CURRENT_USER.age;
                } else {
                    t.name = '';
                    t.age = '';
                }
                renderTravellers(); // Re-render to show values
            }
        }

        function updatePricing() {
            const quantity = travellers.length;
            const subtotal = TRIP_PRICE * quantity;
            const tax = subtotal * TAX_RATE;
            const total = subtotal + tax;

            document.getElementById('quantity-display').textContent = `${quantity} Traveller${quantity > 1 ? 's' : ''} x $${TRIP_PRICE}`;
            document.getElementById('subtotal-display').textContent = `$${subtotal.toFixed(2)}`;
            document.getElementById('tax-display').textContent = `$${tax.toFixed(2)}`;
            document.getElementById('total-display').textContent = `$${total.toFixed(2)}`;
        }

        // Initial Render
        renderTravellers();

    </script>

    <style>
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }
    </style>
</body>

</html>